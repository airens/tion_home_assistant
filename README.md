# Tion Home Assistant
**Версия 2.0: UI integration, HA 2024.2.1 tested**

Интеграция обеспечивает управление бризерами Tion, а также чтение показаний датчиков (включая датчики MagicAir) из системы умного дома Home Assistant. Основано на пакете [tion](https://github.com/airens/tion).

*Внимание: для работы требуется шлюз MagicAir!*
## Установка
### HACS:
1. HACS->Settings->Custom repositories 
2. Добавьте `airens/tion_home_assistant` в поле `ADD CUSTOM REPOSITORY` и выберите `Integration` в `CATEGORY`. Щелкните кнопку `Save`
### Без HACS:
1. скачайте zip файл с компонентом
2. поместите содержимое в `config/custom_components/tion` папку системы Home Assistant
3. Перезагрузите Home Assistant
### ...

4. В разделе Настройки->Устройства и службы->Интеграции нажмите "Добавить интеграцию"
   Найдите поиском интеграцию "Tion", выберите из списка. Введите имя пользователя и пароль вашей учетной записи, нажмите "Подтвердить". 
   При успешной авторизации интеграция будет добавлена, обнаруженные бризеры и модули отобразятся в списке устройств.

## Использование:
После перезагрузки, среди устройств должны появиться бризеры `climate.tion_...` и датчики MagicAir `sensor.magicair_..`.

Службы Home Assistant для управления вашими устройствами:
### climate.set_fan_mode
`fan_mode` задает скорость бризера следующим образом (тип - строка):
- `off`, `0` - выключить
- `1`-`6` - включить в ручном режиме с заданной скоростью
- `1`-`6`:`0`-`2` - включить в ручном режиме с заданной скоростью и задать откуда брать воздух (`0` - из дома, `1` - смешанный, `2` - улица)
- `auto` - автоматическое управление скоростью в зависимости от уровня CO2
- `2-4`, `1-3`, `4-6`... автоматическое управление в заданном диапазоне скоростей
- `2-4:800`, `1-3:900`, `4-6:1000`... автоматическое управление в заданном диапазоне скоростей с задачей целевого уровня CO2
### climate.set_hvac_mode
`hvac_mode` задает режим работы прибора:
- `heat` - нагреватель включен
- `fan_only` - нагреватель выключен
- `off` - прибор выключен
### climate.set_temperature
Используйте для задачи целевой температуры нагревателя
## Если что-то не работает
Включите расширенное логирование для интеграции и пакета `tion` в файле конфигурации `configuration.yaml`:
```yaml
logger:
  default: warning
  logs:
    custom_components.tion: info
    tion: info
```
